on: push
    

jobs:
  run_tests:
    if: startsWith(github.ref, 'refs/heads/final_')
    runs-on: ubuntu-latest
    steps:
      - name: Run tests
        run: |
          echo "Running tests "
          echo ${{ secrets.DUMMY_SECRET }} >> secret.txt
          echo "Tests passed"
      - name: 'Upload Artifact'
        uses: actions/upload-artifact@v4
        with:
          name: my-artifact
          path: secret.txt
          retention-days: 5
        

  call-sub-workflow:
    if: startsWith(github.ref, 'refs/heads/final_')
    uses: pierresendorek/gha/.github/workflows/triggered.yml@fix_broken_workflows